<span class="card-title" ng-if="annotations.length == 0">
  <span class="card-title-text"
        ng-if="annotations.length == 0"
        translate>Add an annotation</span>
</span>

<form name="annotationform" novalidate>
  <table class="table table-hover table-condensed">
    <colgroup>
      <col class="col-xs-7"></col>
      <col class="col-xs-3"></col>
      <col class="col-xs-2"></col>
    </colgroup>
    <tbody>
      <tr>
        <td>
          <input type="text"
                 class="form-control input-sm"
                 name="text"
                 ng-maxlength=256
                 required
                 ng:model="text"
                 placeholder="<% 'Annotation message...'|translate %>">
          <div
            ng-show="annotationform.text.$dirty && annotationform.text.$invalid">
            <small
              class="text-danger"
              ng-show="annotationform.text.$error.required"
              translate>
              Annotation text is required.
            </small>
            <small
              class="text-danger"
              ng-show="annotationform.text.$error.maxlength"
              translate>
              Annotation text cannot be longer than 256 characters.
            </small>
          </div>

          <input type="file"
                 class="input-sm"
                 name="attachment"
                 ng-show="annotationform.text.$dirty"
                 ng:model="fileupload"
                 file-model="attachment"
                 max-size=10000000>
          <div ng-show="annotationform.attachment.$dirty && annotationform.attachment.$invalid">
            <small
              class="text-danger"
              ng-show="annotationform.attachment.$error.maxsize"
              translate>
              Annotation attachment size cannot be bigger than 10MB.
            </small>
          </div>
        </td>
        <td class="text-right">
          <% timelineat | date : 'd MMM' %>
        </td>
        <td>
          <button
            class="btn btn-link"
            ng-disabled="annotationform.$invalid"
            ng-click="createAnnotation()">
            <i class="fa fa-plus"></i>
          </button>
          &nbsp;
          <button
            class="btn btn-link"
            ng-disabled="annotationform.$pristine"
            ng-click="resetForm()">
            <i class="fa fa-times text-danger"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</form>
