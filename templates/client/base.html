{% load i18n %}
<!DOCTYPE html>
<html ng-app="lizard-nxt">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Lizard</title>
    
    {% block css %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}vendor/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}vendor/leaflet/dist/leaflet.css" />

    <!-- CSS for jqueryui: "smoothness" theme -->
    <!--<link href="{{ STATIC_URL }}vendor/jquery-ui-1.10.1.custom/themes/smoothness/jquery-ui.min.css" rel="stylesheet" />-->
    <link href="{{ STATIC_URL }}vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="{{ STATIC_URL }}source/assets/css/nxt_base.css" rel="stylesheet" />
    <link href="{{ STATIC_URL }}source/assets/css/lizard5.css" rel="stylesheet" />
    <link href="{{ STATIC_URL }}source/common/nxt_box/nxt-box.css" rel="stylesheet"/>
    <link href="{{ STATIC_URL }}source/assets/css/animations.css" rel="stylesheet" />
    <!--<link href="{{ STATIC_URL }}vendor/nvd3/source/nv.d3.css" rel="stylesheet"/>-->
    {% endblock css %}

    <script>
      var debug = true;

      var baseLayers = {{ strap_base_layers }};
      var layers = {{ strap_layers }};
      var layerGroups = {{ strap_layer_groups }};
    </script>
  </head>

  <body>
    <header>
      <div id="logo-row" class="navbar">
        <div id="logo">
          <a href="/" title="{% trans 'Back to homepage' %}"><img src="{{ STATIC_URL }}source/assets/images/logo.png" alt="Lizard"></a>
        </div>
        <div id="site-actions">
          <ul class="nav pull-right" id="rightbar-actions">
            <li class="site">
              <a href="#" ng-click="show()" ng-controller="KpiCtrl"><i class="icon-dashboard"></i>&nbsp;KPI</a>
            </li>
            {% if user.is_authenticated %}
              <li class="dropdown">
                <a class="dropdown-toggle" data-content="Toon loginopties" data-title="" href="#" data-toggle="dropdown" 
                data-delay=200>
                  <i class="icon-user"></i> {{ user.first_name }}
                  <b class="caret"></b>
                </a>
                  <ul class="dropdown-menu">
                    <li>
                      <a href="{% url "lizard_auth_client.sso_logout" %}?next=/"> {% trans "Logout" %}
                      </a>
                    </li>
                    <li>
                      <a href="http://dev.sso.lizard.net/edit_profile/"> {% trans "Edit profile" %}
                      </a>
                    </li>
                  </ul>
              </li>
            {% else %}
              <li>
                <a href="{% url "login" %}?next=/"><i class="icon-user"></i> {% trans "Login" %}</a>
              </li>
            {% endif %}
          </ul>
          {% block site_actions %}{% endblock site_actions %}
        </div>
      </div>
    </header>

    {% block content %}
    
    <div ng-controller="MapCtrl">
      <map layergroups="layergroups"></map>
      <div class="layer-switcher well searchbox-shadow">
        <ul class="nav nav-list">
          <li class="nav-header">
            {% trans "Basiskaarten" %}
            <ul class="unstyled">
              <li ng-repeat="layer in layers | orderBy:'order':true" ng-switch on="layer.baselayer" ng-show="layer.baselayer">
                <input id="{[{ layer.id }]}" class="hide" type="checkbox" ng-model="layer.active" ng-change="switch(layer)" ng-switch-when="false">
                <input id="{[{ layer.id }]}" class="hide" type="radio" ng-model="$parent.$parent.$parent.activeBaselayer" ng-value="layer.id" name="baselayer" ng-switch-when="true"> 
                <label class="ng-class: {active: layer.active};" for="{[{ layer.id }]}" ng-bind="layer.name"></label>
              </li>            
            </ul>
          </li>  
          <li class="nav-header">
            {% trans "Themakaarten" %}
            <ul class="unstyled">
              <li ng-repeat="layer in layergroups | orderBy:'order':true">
                <input id="{[{ layer.id }]}" class="hide" type="checkbox" ng-model="layer.active" ng-change="switch(layer)" ng-switch-when="false">
                <input id="{[{ layer.id }]}" class="hide" type="radio" ng-model="$parent.$parent.$parent.activeBaselayer" ng-value="layer.id" name="baselayer" ng-switch-when="true"> 
                <label class="ng-class: {active: layer.active};" for="{[{ layer.id }]}" ng-bind="layer.name"></label>
              </li>            
            </ul>            
          </li>        
        </ul>
      </div>
    </div>





     {% block box_awesome %}{% endblock %}
    <div class="container-fluid">
        {% block toolbar_controllers %}
        {% endblock %}
    {% endblock content %}

    {% block javascript_body %}
    <!-- <script type="text/javascript" src="{{ STATIC_URL }}vendor/jquery/jquery.min.js"></script>   -->
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/leaflet/dist/leaflet.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/Leaflet.utfgrid/dist/leaflet.utfgrid.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/leaflet-tilelayer-geojson/TileLayer.GeoJSON.js"></script>

    <script type="text/javascript" src="{{ STATIC_URL }}vendor/angular/angular.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/angular-resource/angular-resource.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/angular-ui-utils/modules/event/event.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/angular-ui-utils/modules/highlight/highlight.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/angular-ui-utils/modules/keypress/keypress.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/bootstrap/js/bootstrap.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/lizard-nxt-services.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/lizard-nxt.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/directives/omnibox.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/directives/leaflet.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/controllers/omnibox-controllers.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/controllers/kpi-controllers.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/app/filters/truncate.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/common/nxt_box/nxt-box.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}source/common/nxt_graph/nxt-graph.js?{{ random_string }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}vendor/d3/d3.min.js?{{ random_string }}"></script>
    <!-- <script type="text/javascript" src="{{ STATIC_URL }}lib/nxt_graph/nxt-graph.js?{{ random_string }}"></script> -->
    
    {% endblock %}

  </body>
</html>
